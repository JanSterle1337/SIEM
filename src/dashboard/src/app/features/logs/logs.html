<div class="flex flex-col h-full w-full">
    <div class="flex items-center justify-between p-4 bg-[#111827] border-b border-slate-800">
        <div class="relative w-1/2">
            <input type="text"
                   (keyup.enter)="onSearch($event)"
                   placeholder="Search logs... (Enter to submit)"
                   class="w-full bg-[#0b0f19] border border-slate-700 rounded py-2 px-4 text-sm text-white focus:border-blue-500 outline-none">
        </div>

        <button (click)="loadLogs()"
                class="bg-slate-800 hover:bg-slate-700 text-slate-300 text-xs font-bold py-2 px-4 rounded border border-slate-700 transition-all">
            REFRESH DATA
        </button>
    </div>

    <div class="flex-1 overflow-auto">
        <table class="w-full text-left text-[12px] font-mono border-separate border-spacing-0">
            <thead class="sticky top-0 bg-[#1a202c] shadow-md z-10">
            <tr class="text-slate-500 uppercase">
                <th class="p-3 border-b border-slate-800">Timestamp</th>
                <th class="p-3 border-b border-slate-800">Source IP</th>
                <th class="p-3 border-b border-slate-800">Status</th>
                <th class="p-3 border-b border-slate-800">Message</th>
            </tr>
            </thead>
            <tbody>
            <ng-container *ngFor="let log of logs; let i = index">
                <tr (click)="toggleRow(i)"
                    class="hover:bg-blue-600/5 cursor-pointer border-b border-slate-900/50 transition-colors">
                    <td class="p-3 text-blue-400 whitespace-nowrap">{{ log.timestamp | date:'HH:mm:ss.SSS' }}</td>
                    <td class="p-3 text-slate-300">{{ log.src_endpoint?.ip || '-' }}</td>
                    <td class="p-3">
              <span [class.text-red-500]="log.status === 'Failure'"
                    [class.text-green-500]="log.status === 'Success'">
                {{ log.status || 'INFO' }}
              </span>
                    </td>
                    <td class="p-3 text-slate-400 truncate max-w-md">{{ log.message }}</td>
                </tr>

                <tr *ngIf="expandedRow === i" class="bg-black/20">
                    <td colspan="4" class="p-4 bg-[#05070a] border-b border-blue-900/30">
                        <pre class="text-[11px] text-blue-300 overflow-x-auto">{{ log | json }}</pre>
                    </td>
                </tr>
            </ng-container>
            </tbody>
        </table>
    </div>
</div>